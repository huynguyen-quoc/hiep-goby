{"version":3,"sources":["common.js","artists.js","home.js","wishlist.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"common.js","sourcesContent":["/**\n * Created by huynguyen on 8/20/16.\n */\nvar parallaxScrollEnabled=true;\nif( $(window).width() < 800 || navigator.userAgent.match(/(iPod|iPhone|iPad)/) ){\n    parallaxScrollEnabled=false;\n}\nwindow.hidePopover = function(event){\n    window.clearTimeout(window.showPopoverTimeout);\n    $('#model-image-popover').fadeOut(100);\n};\n(function($){\n\n\n\n    if (window.parallaxScrollEnabled==false) {\n        $(\".parallax\").addClass(\"background-attachment-scroll\");\n    }\n\n    $(document).on('touchstart', function(event) {\n        if(event.type=='touchstart'){\n            $('html').removeClass('is-not-touch');\n            $('html').addClass('is-touch');\n            $(document).off('touchstart');\n        }\n    });\n\n    var addToCart = function(e){\n        e.preventDefault();\n        var $this = $(this);\n        $this.toggleClass('loading');\n        $this.off('click');\n        var artist = $this.closest('article').data('artist');\n        var words = CryptoJS.enc.Base64.parse(artist);\n        var textString = CryptoJS.enc.Utf8.stringify(words);\n        $.ajax({\n            url : '/api/cart',\n            type:\"POST\",\n            contentType:\"application/json; charset=utf-8\",\n            dataType:\"json\",\n            data: textString,\n            success: function(data){\n                $this.toggleClass('loading');\n                var cart = $('.shopping-cart:visible');\n                var dragItem = $this.find(\".button-loading\");\n                $this.on('click', removeFromCard);\n                $this.closest('.model').toggleClass('wishlist');\n                if (dragItem) {\n                    var width = $this.width();\n                    var height =$this.height();\n                    var dragItemClone = dragItem.clone()\n                        .offset({\n                            top: dragItem.parent().offset().top + height / 2,\n                            left: dragItem.parent().offset().left + width / 2\n                        })\n                        .css({\n                            'position': 'absolute',\n                            'display': 'block',\n                            'z-index' : 9999\n                        })\n                        .appendTo($('body'))\n                        .animate({\n                            'top': cart.offset().top + 10,\n                            'left': cart.offset().left + 10,\n                        }, 1000);\n\n                    dragItemClone.animate({\n                        'width': 0,\n                        'height': 0\n                    }, function () {\n                        var count = data['total_cart'];\n                        $('.wishlist-counter').text(count);\n                        $(this).detach()\n                    });\n                }\n            },error : function(){\n                $this.toggleClass('loading');\n                $this.on('click', addToCart);\n            }\n        });\n    };\n    var removeFromCard = function(e){\n        e.preventDefault();\n        var $this = $(this);\n        var $body = $('body');\n        $this.toggleClass('loading');\n        $this.off('click');\n        var artist = $this.closest('article').data('artist');\n        var words = CryptoJS.enc.Base64.parse(artist);\n        var textString = CryptoJS.enc.Utf8.stringify(words);\n        $.ajax({\n            url : '/api/cart/' + JSON.parse(textString).artist_slug,\n            type:\"DELETE\",\n            contentType:\"application/json; charset=utf-8\",\n            dataType:\"json\",\n            success: function(data){\n                $this.toggleClass('loading');\n                var count = data['total_cart'];\n                $('.wishlist-counter').text(count);\n                window.hidePopover();\n                if(!$body.hasClass('wishlist')) {\n                    $this.on('click', addToCart);\n                    $this.closest('.model').toggleClass('wishlist');\n                }else{\n\n                    var $item = $this.closest('.masonry-brick');\n                    var $grid = $('.grid-masonry');\n                    $grid.masonry( 'remove', [$item[0]]).masonry('layout');;\n\n\n                }\n            },error : function(){\n                $this.toggleClass('loading');\n                $this.on('click', removeFromCard);\n            }\n        });\n    };\n\n    var deactiveItemsInParentTouchItemScope = function(el){\n        if($('html').hasClass('is-touch')){\n            $(el).closest('.touch-item-wrapper').find('.active-touch').removeClass('active-touch');\n        }\n    };\n\n    $(function(){\n            //$(\".navi_mobile\").slideToggle(200);\n            $(\".navi_mobile\").on('touchmove', function(e) {\n                e.preventDefault();\n            });\n            $.ajaxSetup({\n                headers: {\n                    'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\n                }\n            });\n            // HEAD ROOM\n            var header = document.querySelector(\"#header\");\n            if(header!= undefined){\n                new Headroom(header, {\n                    tolerance: {\n                        down : 2,\n                        up : 5\n                    },\n                    offset : 450,\n                    classes: {\n                        initial: \"slide--top\",\n                        pinned: \"slide--reset\",\n                        unpinned: \"slide--up\",\n                        top : \"slide--top\",\n                        notTop : \"slide--not-top\"\n                    },\n                    onUnpin:function(){\n                        if(this.lastKnownScrollY<=this.offset*3){\n                            $(this.elem).addClass('slide--up-from-top');\n                        }\n                    },\n                    onPin:function(){\n                        $(this.elem).removeClass('slide--up-from-top');\n                    }\n                }).init();\n            }\n            $('.model:not(.wishlist) .wishlist-toggle-wrapper').on('click', addToCart);\n            $('.model.wishlist .wishlist-toggle-wrapper').on('click', removeFromCard);\n            $('.model a').on('click touchstart', function(event){\n                var $html = $('html');\n                var $this = $(this);\n                if($html.hasClass('is-touch')){\n                    //if(event.type=='click'){\n                        var item= $this.closest('.touch-item');\n                        if(item.length){\n                            if(item.hasClass('active-touch')){\n                                return true;\n                            }\n                            else{\n                                event.stopPropagation();\n                                event.preventDefault();\n                                event.stopNextHandler=true;\n                                deactiveItemsInParentTouchItemScope(item);\n                                item.addClass('active-touch');\n                                return false;\n                            }\n                        }\n                    //}\n                }\n            });\n            $('.navigation-toggle,.navi-toggle').on('click', function(e){\n                $(\".navi_mobile\").slideToggle(200);\n            });\n\n\n    });\n\n\n})(window.jQuery);","/**\n * Created by huynguyen on 8/20/16.\n */\n\nvar ArtistPage = function(){\n\n    var initPage = function(totalGrid){\n        $('body').toggleClass('artists');\n        $('.loader-container').toggleClass(\"active\");\n        $('.grid-masonry').toggleClass(\"active\");\n        initGrid(totalGrid);\n        initAddCart();\n    };\n\n    var initGrid = function(totalGrid){\n\n        var $grid = $('.grid-masonry').masonry({\n            columnWidth: '.grid-column-size',\n            itemSelector: '.masonry-brick',\n            percentPosition: true\n        });\n\n        var infiniteScroll = $('.grid-masonry').infinitescroll({\n                navSelector  : \"#pagination\",\n                // selector for the paged navigation (it will be hidden)\n                nextSelector : \"#pagination p a\",\n                // selector for the NEXT link (to page 2)\n                itemSelector : \".grid-masonry .masonry-brick\",\n                dataType : 'json',\n                loading: {\n                    finished:  function(opts){\n                        $('#loading-more-btn').html(' <span class=\"gobyArtIcon medium\">F</span><br>Load More</a>');\n                    },\n                    finishedMsg: '',\n                    img: undefined,\n                    msg: undefined,\n                    msgText :'',\n                    selector: null,\n                    speed: 'fast',\n                    start:  function(opts){\n                        if(totalGrid <= opts.state.currPage) return;\n                        $('#loading-more-btn').html(' <span class=\"gobyArtIcon medium\">F</span><br>Loading...</a>');\n                        var  path = opts.path;\n                        opts.state.currPage++;\n                        var  desturl = (typeof path === 'function') ? path(opts.state.currPage - 1) : path.join(opts.state.currPage - 1);\n\n                        $.ajax({\n                            dataType: 'json',\n                            type: 'GET',\n                            url: desturl,\n                            success: function (data, textStatus, jqXHR) {\n                                opts.loading.finished.call($(opts.contentSelector)[0],opts);\n                                opts.state.isDuringAjax = false;\n                                if(data.total_page >= opts.state.currPage) {\n                                    opts.state.isDone = true;\n                                    $('#loading-more-btn').remove();\n                                }\n                                opts.callback($(opts.contentSelector)[0],data,desturl);\n                            },\n                            error: function() {\n                            }\n                        });\n                    }\n                },\n                appendCallback: false,\n                path : function(currentPageNumber){\n                    return (window.location.href+'?page=' + currentPageNumber);\n                }\n            },\n            // Function called once the elements are retrieved\n            function(data) {\n                var artists =  data.artists;\n                var temps = [];\n                $.each(artists, function(index, artist){\n                    var url = '/assets/upload/' + artist.artist_type_slug + '/' + artist.artist_slug + '/' + artist.artist_avatar;\n                    var data = JSON.stringify(artist);\n                    var wordArray = CryptoJS.enc.Utf8.parse(data);\n                    var base64 = CryptoJS.enc.Base64.stringify(wordArray);\n\n                    var template = \"<div class='masonry-brick'> <article class='model grid-item' data-artist='\" + base64 + \"'>\" +\n                        \"<a href='/nghe-si' > \" +\n                        \"<div class='model-img-wrapper model-background-img-wrapper' style='background-image: url(\" + url + \")'>\" +\n                        \"<div class='model-name-box'> <span class='model-name' data-name='\" + artist.artist_name + \"'></span> </div>\" +\n                        \"<div class='wishlist-icon-wrapper in-wishlist' > <div class=''>\" +\n                        \"<span class='model-is-active gobyArtIcon'>D</span> <span class='gobyArtIcon'>S</span> </div> </div>\" +\n                        \"<div class='wishlist-toggle-wrapper'> <div class='in-wishlist'> \" +\n                        \"<span class='icon-label s_hidden'>Shortlist remove</span> \" +\n                        \"<span class='icon-label l_hidden m_hidden'>Shortlist </span> \" +\n                        \"<span class='sofaIcon l_hidden m_hidden'>D</span> \" +\n                        \"</div>\" +\n                        \"<div class='not-in-wishlist'>\" +\n                        \"<span class='icon-label s_hidden'>Add to shortlist</span>\" +\n                        \" <span class='icon-label l_hidden m_hidden'>Shortlist +</span>\" +\n                        \"</div>\" +\n                        \"</div>\" +\n                        \"</div> </a> \" +\n                        \"<div class='model-name-wrapper'> <a href='#'> <span class='model-name'>\" + artist.artist_name + \"</span> </a>\"+\n                        \"</div> </article> </div>\";\n                    // $grid.append($.parseHTML(template));\n                    temps.push($.parseHTML(template)[0]);\n                });\n                temps = $(temps).css('opacity', 0);\n                temps.animate({opacity: 1});\n                $grid.append(temps);\n                $grid.masonry('appended', temps);\n            });\n\n        $(\".grid-masonry\").on('mouseenter', '.grid-item',function(e){\n            var $this = $(this);\n            var artist = $this.data('artist');\n            if(artist) {\n                var words = CryptoJS.enc.Base64.parse(artist);\n                var textString = CryptoJS.enc.Utf8.stringify(words);\n                initImagePopover(e, JSON.parse(textString))\n            }\n        });\n        $('.grid-masonry').hoverIntent({\n            over: showPopover,\n            out: hidePopover,\n            selector: '.grid-item'\n        });\n    };\n\n    var showPopover=function(event){\n        var $html = $('html');\n        if($html.hasClass('is-touch')) return false;\n        window.clearTimeout(window.showPopoverTimeout);\n\n        var targetEl=$(event.currentTarget);\n        if(targetEl==undefined) return false;\n        var targetElPosition=targetEl.offset();\n\n        var top=targetElPosition.top;\n        var left=targetElPosition.left;\n        var height=targetEl.outerHeight();\n        var width=targetEl.outerWidth();\n        var padding=targetEl.parent().innerHeight()-height;\n\n        var popupMainCss={\n            top: top - padding,\n            left: left - padding,\n        };\n        var popupInfoCss={\n            top: 0,\n            left: 0,\n            width: width + 2 * padding,\n            padding: padding\n        };\n        var modelInfoCss={\n            marginTop: height + padding\n        };\n        var popupGridCss={\n            top: 0,\n            left: 'auto',\n            right: 'auto',\n            width:  popupInfoCss.width * 1.05,\n            paddingTop: padding,\n            paddingRight: 0,\n            paddingBottom: 0,\n            paddingLeft: 0,\n            display: 'block'\n        };\n        var popupGridColumnCss={\n            paddingRight: 0,\n            paddingLeft: 0,\n            marginBottom: padding\n        };\n\n        var offsetParent=$('body');\n        var offsetParentWidth=offsetParent.innerWidth();\n\n        var shadowCss={};\n        if(left < (offsetParent.offset().left+offsetParentWidth/2)){\n            // position on right\n            popupGridCss.left=popupInfoCss.width;\n            popupGridColumnCss.paddingRight=padding;\n            $('#model-image-popover').removeClass(\"model-on-right\").addClass(\"model-on-left\").css(shadowCss);\n        }\n        else{\n            // position on left\n            popupGridCss.left=-popupGridCss.width;\n            popupGridColumnCss.paddingLeft=padding;\n            $('#model-image-popover').removeClass(\"model-on-left\").addClass(\"model-on-right\").css(shadowCss);\n\n        }\n\n        // apply css\n        $('#model-image-popover').css(popupMainCss);\n        $('#model-image-popover-info').css(popupInfoCss);\n        $('#model-image-popover-info #model-info').css(modelInfoCss);\n        $('#model-image-popover-grid').css(popupGridCss);\n        $('#model-image-popover-grid .grid-model-image-popover-column').css(popupGridColumnCss);\n\n        // change layer ordering\n        targetEl.closest('.grid-masonry').find(\".model\").css({'z-index':0});\n        targetEl.css({'z-index':29});\n\n        window.showPopoverTimeout=window.setTimeout(function(){$('#model-image-popover').hide().fadeIn(100);}, 250);\n    };\n\n    var hidePopover = function(event){\n        window.clearTimeout(window.showPopoverTimeout);\n        $('#model-image-popover').fadeOut(100);\n    };\n\n    var initImagePopover=function(event, model){\n        var information_data_1 = model.artist_extra_1;\n        var information_data_2 = model.artist_extra_2;\n        $('#model-image-popover .model-info-model-name').html(model['artist_full_name']);\n        $('#model-image-popover .model-type').html(\"(\" + model['artist_type_name'] + \")\");\n        var information1Data = '';\n        var information2Data = '';\n        $('#model-image-popover .model-info-col-1').empty();\n        $('#model-image-popover .model-info-col-2').empty();\n\n        $.each(information_data_1 , function(){\n            var template = '<div class=\"model-info-detail\">' +\n                '<span class=\"model-detail-label\">' + this.title + '</span>' +\n                '<span class=\"model-detail-value\" >' + this.value + '</span>' +\n                '</div>';\n            information1Data += template;\n        });\n        $.each(information_data_2 , function(){\n            var template = '<div class=\"model-info-detail\">' +\n                '<span class=\"model-detail-label\">' + this.title + '</span>' +\n                '<span class=\"model-detail-value\" >' + this.value + '</span>' +\n                '</div>';\n            information2Data += template;\n        });\n        $('#model-image-popover .model-info-col-1').html(information1Data);\n        $('#model-image-popover .model-info-col-2').html(information2Data);\n\n        $.ajax({\n            url : '/api/image/preview/' + model.artist_slug,\n            type:\"GET\",\n            contentType:\"application/json; charset=utf-8\",\n            dataType:\"json\",\n            success: function(data){\n                $('#model-image-popover-grid .grid-model-image-popover .grid-model-image-popover-column').empty();\n                if(data.length > 0){\n                    var template  =  '<div class=\"grid-item\"> <img src=\"/assets/upload/' + data[0].artist_type + '/' + data[0].artist_name + '/' + data[0].file_name + '\"></div>';\n                    if(data.length > 1) {\n                        template += '<div class=\"grid-item\"> <img src=\"/assets/upload/' +  data[1].artist_type+ '/' + data[1].artist_name + '/' +  data[1].file_name + '\"></div>';\n                    }\n                    $('#model-image-popover-grid .grid-model-image-popover .grid-model-image-popover-column.column-1').html(template);\n                    template  = '';\n                    if(data.length > 2) {\n                        template +=' <div class=\"grid-item\"> <img src=\"/assets/upload/' + data[2].artist_type + '/' + data[2].artist_name + '/' + data[2].file_name + '\"></div>';\n                        if(data.length > 3) {\n                            template += '<div class=\"grid-item\"> <img src=\"/assets/upload/' +  data[3].artist_type+ '/' + data[3].artist_name + '/' +  data[3].file_name + '\"></div>';\n                        }\n                    }\n                    $('#model-image-popover-grid .grid-model-image-popover .grid-model-image-popover-column.column-2').html(template);\n                }\n            }\n        });\n\n        //   var requestId = model['artist_slug'] + \"_\" + Math.random();\n//            if(requestId!=$scope.imagePopover.requestId){\n//                $scope.imagePopover.images=$scope.defaultImagePopoverImageArray;\n//            }\n//            $scope.imagePopover.requestId=requestId;\n//            $scope.imagePopover.isActive=true;\n//            $scope.imagePopover.model=model;\n//\n//            ImageSet.server().get({imageTypeString:'preview',modelString:model.name},function(data){\n//                if(data.$resolved && (!data.data!=undefined) && (requestId==$scope.imagePopover.requestId)){\n//                    $scope.imagePopover.images=ImageSet.getImagesFromImageSet(data);\n//                }\n//            });\n    };\n\n\n    var initAddCart = function(){\n\n    };\n\n\n    return {\n        initPage : initPage\n    }\n}();","/**\n * Created by huynguyen on 8/26/16.\n */\n\n\nvar HomePage = function(){\n\n    var initPage = function(youtube){\n        $('body').toggleClass('home');\n        $('.loader-container').toggleClass(\"active\");\n        $('.grid-masonry').toggleClass(\"active\");\n        $('.partner-slideshow-wrapper').toggleClass('hidden-data');\n        scrollParallaxHomeImage();$(window).scroll (function() {scrollParallaxHomeImage();});\n        $('#title-video').html('<iframe  src=\"https://www.youtube.com/embed/' + youtube+ '?autoplay=1&controls=0&modestbranding=1&loop=1&playlist=' + youtube\n            +'\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>').fitVids();\n        initSlider();\n        initGrid();\n        initCheckBox();\n    };\n\n    var scrollParallaxHomeImage = function(){\n        var el=$('#home-spacer-image');\n        var speed=0.75\n        var bgPositionOffsetY = 0;\n        var newPositionY=bgPositionOffsetY;\n        if(el.length>0){\n            if(window.parallaxScrollEnabled){\n                var windowHeight=$(window).height();\n                var top = el.offset().top;\n                var scrollY = $(window).scrollTop();\n                if( scrollY + windowHeight + 100 > top && top - windowHeight - 100 < scrollY){\n                    distance = scrollY - top;\n                    newPositionY=(bgPositionOffsetY - distance * speed)+\"px\";\n                }\n            }\n            elBackgrounPos = \"50% \" + newPositionY;\n            el.css({backgroundPosition: elBackgrounPos});\n        }\n    };\n\n    var initCheckBox = function(){\n        $('input[name=iCheck]').iCheck({\n            checkboxClass: 'iradio_square-pink artist-check',\n            radioClass: 'iradio_flat-pink',\n            uncheckedClass: 'test',\n            increaseArea: '20%' // optional\n        });\n        $(\"#filter_btn\").on('click' , function(e){\n            e.preventDefault();\n            e.stopPropagation();\n            var data = $.map($('input[name=\"iCheck\"]:checked'), function(item, index){\n                return $(item).val();\n            });\n            if(data.length <= 0) return;\n            window.location.href='/danh-sach-nghe-si/' + data.join('_') + '/tat-ca';\n        });\n    };\n\n    var initGrid = function(){\n        $('.grid-masonry').masonry({\n            columnWidth: '.grid-column-size',\n            itemSelector: '.masonry-brick',\n            percentPosition: true\n        });\n\n    };\n\n    var initSlider = function(){\n        $(\"#partner-slideshow\").slick({\n            slidesToScroll: 5,\n            variableWidth: true,\n            autoPlay: true,\n            infinite: true,\n            arrows: true,\n            dots : false,\n            responsive: [\n                {\n                    breakpoint: 850,\n                    settings:{\n                        slidesToScroll: 3\n                    }\n                }\n                ,{\n                    breakpoint: 640,\n                    settings:{\n                        slidesToScroll: 1\n                    }\n                }\n            ]\n        });\n    }\n\n\n\n\n\n    return {\n        initPage : initPage\n    }\n}();","/**\n * Created by huynguyen on 8/20/16.\n */\n\nvar WishListPage = function(){\n\n    var initPage = function(){\n        $('body').toggleClass('wishlist');\n        $('.loader-container').toggleClass(\"active\");\n        $('.grid-masonry').toggleClass(\"active\");\n        initGrid();\n        initAddCart();\n    };\n\n    var initGrid = function(totalGrid){\n\n        var $grid = $('.grid-masonry').masonry({\n            columnWidth: '.grid-column-size',\n            itemSelector: '.masonry-brick',\n            percentPosition: true\n        });\n        $(\".grid-masonry\").on('mouseenter', '.grid-item',function(e){\n            var $this = $(this);\n            var artist = $this.data('artist');\n            if(artist) {\n                var words = CryptoJS.enc.Base64.parse(artist);\n                var textString = CryptoJS.enc.Utf8.stringify(words);\n                initImagePopover(e, JSON.parse(textString))\n            }\n        });\n        $('.grid-masonry').hoverIntent({\n            over: showPopover,\n            out: hidePopover,\n            selector: '.grid-item'\n        });\n    };\n\n    var showPopover=function(event){\n        var $html = $('html');\n        if($html.hasClass('is-touch')) return false;\n        window.clearTimeout(window.showPopoverTimeout);\n\n        var targetEl=$(event.currentTarget);\n        if(targetEl==undefined) return false;\n        var targetElPosition=targetEl.offset();\n\n        var top=targetElPosition.top;\n        var left=targetElPosition.left;\n        var height=targetEl.outerHeight();\n        var width=targetEl.outerWidth();\n        var padding=targetEl.parent().innerHeight()-height;\n\n        var popupMainCss={\n            top: top - padding,\n            left: left - padding,\n        };\n        var popupInfoCss={\n            top: 0,\n            left: 0,\n            width: width + 2 * padding,\n            padding: padding\n        };\n        var modelInfoCss={\n            marginTop: height + padding\n        };\n        var popupGridCss={\n            top: 0,\n            left: 'auto',\n            right: 'auto',\n            width:  popupInfoCss.width * 1.05,\n            paddingTop: padding,\n            paddingRight: 0,\n            paddingBottom: 0,\n            paddingLeft: 0,\n            display: 'block'\n        };\n        var popupGridColumnCss={\n            paddingRight: 0,\n            paddingLeft: 0,\n            marginBottom: padding\n        };\n\n        var offsetParent=$('body');\n        var offsetParentWidth=offsetParent.innerWidth();\n\n        var shadowCss={};\n        if(left < (offsetParent.offset().left+offsetParentWidth/2)){\n            // position on right\n            popupGridCss.left=popupInfoCss.width;\n            popupGridColumnCss.paddingRight=padding;\n            $('#model-image-popover').removeClass(\"model-on-right\").addClass(\"model-on-left\").css(shadowCss);\n        }\n        else{\n            // position on left\n            popupGridCss.left=-popupGridCss.width;\n            popupGridColumnCss.paddingLeft=padding;\n            $('#model-image-popover').removeClass(\"model-on-left\").addClass(\"model-on-right\").css(shadowCss);\n\n        }\n\n        // apply css\n        $('#model-image-popover').css(popupMainCss);\n        $('#model-image-popover-info').css(popupInfoCss);\n        $('#model-image-popover-info #model-info').css(modelInfoCss);\n        $('#model-image-popover-grid').css(popupGridCss);\n        $('#model-image-popover-grid .grid-model-image-popover-column').css(popupGridColumnCss);\n\n        // change layer ordering\n        targetEl.closest('.grid-masonry').find(\".model\").css({'z-index':0});\n        targetEl.css({'z-index':29});\n\n        window.showPopoverTimeout=window.setTimeout(function(){$('#model-image-popover').hide().fadeIn(100);}, 250);\n    };\n\n\n    var initImagePopover=function(event, model){\n        var information_data_1 = model.artist_extra_1;\n        var information_data_2 = model.artist_extra_2;\n        $('#model-image-popover .model-info-model-name').html(model['artist_full_name']);\n        $('#model-image-popover .model-type').html(\"(\" + model['artist_type_name'] + \")\");\n        var information1Data = '';\n        var information2Data = '';\n        $('#model-image-popover .model-info-col-1').empty();\n        $('#model-image-popover .model-info-col-2').empty();\n\n        $.each(information_data_1 , function(){\n            var template = '<div class=\"model-info-detail\">' +\n                '<span class=\"model-detail-label\">' + this.title + '</span>' +\n                '<span class=\"model-detail-value\" >' + this.value + '</span>' +\n                '</div>';\n            information1Data += template;\n        });\n        $.each(information_data_2 , function(){\n            var template = '<div class=\"model-info-detail\">' +\n                '<span class=\"model-detail-label\">' + this.title + '</span>' +\n                '<span class=\"model-detail-value\" >' + this.value + '</span>' +\n                '</div>';\n            information2Data += template;\n        });\n        $('#model-image-popover .model-info-col-1').html(information1Data);\n        $('#model-image-popover .model-info-col-2').html(information2Data);\n\n        $.ajax({\n            url : '/api/image/preview/' + model.artist_slug,\n            type:\"GET\",\n            contentType:\"application/json; charset=utf-8\",\n            dataType:\"json\",\n            success: function(data){\n                $('#model-image-popover-grid .grid-model-image-popover .grid-model-image-popover-column').empty();\n                if(data.length > 0){\n                    var template  =  '<div class=\"grid-item\"> <img src=\"/assets/upload/' + data[0].artist_type + '/' + data[0].artist_name + '/' + data[0].file_name + '\"></div>';\n                    if(data.length > 1) {\n                        template += '<div class=\"grid-item\"> <img src=\"/assets/upload/' +  data[1].artist_type+ '/' + data[1].artist_name + '/' +  data[1].file_name + '\"></div>';\n                    }\n                    $('#model-image-popover-grid .grid-model-image-popover .grid-model-image-popover-column.column-1').html(template);\n                    template  = '';\n                    if(data.length > 2) {\n                        template +=' <div class=\"grid-item\"> <img src=\"/assets/upload/' + data[2].artist_type + '/' + data[2].artist_name + '/' + data[2].file_name + '\"></div>';\n                        if(data.length > 3) {\n                            template += '<div class=\"grid-item\"> <img src=\"/assets/upload/' +  data[3].artist_type+ '/' + data[3].artist_name + '/' +  data[3].file_name + '\"></div>';\n                        }\n                    }\n                    $('#model-image-popover-grid .grid-model-image-popover .grid-model-image-popover-column.column-2').html(template);\n                }\n            }\n        });\n    };\n\n\n    var initAddCart = function(){\n\n    };\n\n\n    return {\n        initPage : initPage\n    }\n}();"],"sourceRoot":"/source/"}