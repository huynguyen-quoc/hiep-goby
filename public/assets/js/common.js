var parallaxScrollEnabled=!0;($(window).width()<800||navigator.userAgent.match(/(iPod|iPhone|iPad)/))&&(parallaxScrollEnabled=!1),window.hidePopover=function(e){window.clearTimeout(window.showPopoverTimeout),$("#model-image-popover").fadeOut(100)},function(e){0==window.parallaxScrollEnabled&&e(".parallax").addClass("background-attachment-scroll"),e(document).on("touchstart",function(o){"touchstart"==o.type&&(e("html").removeClass("is-not-touch"),e("html").addClass("is-touch"),e(document).off("touchstart"))});var o=function(i){i.preventDefault();var a=e(this);a.toggleClass("loading"),a.off("click");var s=a.closest("article").data("artist"),n=CryptoJS.enc.Base64.parse(s),l=CryptoJS.enc.Utf8.stringify(n);e.ajax({url:"/api/cart",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:l,success:function(o){a.toggleClass("loading");var i=e(".shopping-cart:visible"),s=a.find(".button-loading");if(a.on("click",t),a.closest(".model").toggleClass("wishlist"),s){var n=a.width(),l=a.height(),r=s.clone().offset({top:s.parent().offset().top+l/2,left:s.parent().offset().left+n/2}).css({position:"absolute",display:"block","z-index":9999}).appendTo(e("body")).animate({top:i.offset().top+10,left:i.offset().left+10},1e3);r.animate({width:0,height:0},function(){var t=o.total_cart;e(".wishlist-counter").text(t),e(this).detach()})}},error:function(){a.toggleClass("loading"),a.on("click",o)}})},t=function(i){i.preventDefault();var a=e(this),s=e("body");a.toggleClass("loading"),a.off("click");var n=a.closest("article").data("artist"),l=CryptoJS.enc.Base64.parse(n),r=CryptoJS.enc.Utf8.stringify(l);e.ajax({url:"/api/cart/"+JSON.parse(r).artist_slug,type:"DELETE",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){a.toggleClass("loading");var i=t.total_cart;if(e(".wishlist-counter").text(i),window.hidePopover(),s.hasClass("wishlist")){var n=a.closest(".masonry-brick"),l=e(".grid-masonry");l.masonry("remove",[n[0]]).masonry("layout")}else a.on("click",o),a.closest(".model").toggleClass("wishlist")},error:function(){a.toggleClass("loading"),a.on("click",t)}})},i=function(o){e("html").hasClass("is-touch")&&e(o).closest(".touch-item-wrapper").find(".active-touch").removeClass("active-touch")};e(function(){e(".navi_mobile").on("touchmove",function(e){e.preventDefault()}),e.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}});var a=document.querySelector("#header");void 0!=a&&new Headroom(a,{tolerance:{down:2,up:5},offset:450,classes:{initial:"slide--top",pinned:"slide--reset",unpinned:"slide--up",top:"slide--top",notTop:"slide--not-top"},onUnpin:function(){this.lastKnownScrollY<=3*this.offset&&e(this.elem).addClass("slide--up-from-top")},onPin:function(){e(this.elem).removeClass("slide--up-from-top")}}).init(),e(".model:not(.wishlist) .wishlist-toggle-wrapper").on("click",o),e(".model.wishlist .wishlist-toggle-wrapper").on("click",t),e(".model a").on("click touchstart",function(o){var t=e("html"),a=e(this);if(t.hasClass("is-touch")){var s=a.closest(".touch-item");if(s.length)return!!s.hasClass("active-touch")||(o.stopPropagation(),o.preventDefault(),o.stopNextHandler=!0,i(s),s.addClass("active-touch"),!1)}}),e(".navigation-toggle,.navi-toggle").on("click",function(o){e(".navi_mobile").slideToggle(200)})})}(window.jQuery);var ArtistPage=function(){var e=function(e){$("body").toggleClass("artists"),$(".loader-container").toggleClass("active"),$(".grid-masonry").toggleClass("active"),o(e),s()},o=function(e){var o=$(".grid-masonry").masonry({columnWidth:".grid-column-size",itemSelector:".masonry-brick",percentPosition:!0});$(".grid-masonry").infinitescroll({navSelector:"#pagination",nextSelector:"#pagination p a",itemSelector:".grid-masonry .masonry-brick",dataType:"json",loading:{finished:function(e){$("#loading-more-btn").html(' <span class="gobyArtIcon medium">F</span><br>Load More</a>')},finishedMsg:"",img:void 0,msg:void 0,msgText:"",selector:null,speed:"fast",start:function(o){if(!(e<=o.state.currPage)){$("#loading-more-btn").html(' <span class="gobyArtIcon medium">F</span><br>Loading...</a>');var t=o.path;o.state.currPage++;var i="function"==typeof t?t(o.state.currPage-1):t.join(o.state.currPage-1);$.ajax({dataType:"json",type:"GET",url:i,success:function(e,t,a){o.loading.finished.call($(o.contentSelector)[0],o),o.state.isDuringAjax=!1,e.total_page>=o.state.currPage&&(o.state.isDone=!0,$("#loading-more-btn").remove()),o.callback($(o.contentSelector)[0],e,i)},error:function(){}})}}},appendCallback:!1,path:function(e){return window.location.href+"?page="+e}},function(e){var t=e.artists,i=[];$.each(t,function(e,o){var t="/assets/upload/"+o.artist_type_slug+"/"+o.artist_slug+"/"+o.artist_avatar,a=JSON.stringify(o),s=CryptoJS.enc.Utf8.parse(a),n=CryptoJS.enc.Base64.stringify(s),l="<div class='masonry-brick'> <article class='model grid-item' data-artist='"+n+"'><a href='/nghe-si' > <div class='model-img-wrapper model-background-img-wrapper' style='background-image: url("+t+")'><div class='model-name-box'> <span class='model-name' data-name='"+o.artist_name+"'></span> </div><div class='wishlist-icon-wrapper in-wishlist' > <div class=''><span class='model-is-active gobyArtIcon'>D</span> <span class='gobyArtIcon'>S</span> </div> </div><div class='wishlist-toggle-wrapper'> <div class='in-wishlist'> <span class='icon-label s_hidden'>Shortlist remove</span> <span class='icon-label l_hidden m_hidden'>Shortlist </span> <span class='sofaIcon l_hidden m_hidden'>D</span> </div><div class='not-in-wishlist'><span class='icon-label s_hidden'>Add to shortlist</span> <span class='icon-label l_hidden m_hidden'>Shortlist +</span></div></div></div> </a> <div class='model-name-wrapper'> <a href='#'> <span class='model-name'>"+o.artist_name+"</span> </a></div> </article> </div>";i.push($.parseHTML(l)[0])}),i=$(i).css("opacity",0),i.animate({opacity:1}),o.append(i),o.masonry("appended",i)});$(".grid-masonry").on("mouseenter",".grid-item",function(e){var o=$(this),t=o.data("artist");if(t){var i=CryptoJS.enc.Base64.parse(t),s=CryptoJS.enc.Utf8.stringify(i);a(e,JSON.parse(s))}}),$(".grid-masonry").hoverIntent({over:t,out:i,selector:".grid-item"})},t=function(e){var o=$("html");if(o.hasClass("is-touch"))return!1;window.clearTimeout(window.showPopoverTimeout);var t=$(e.currentTarget);if(void 0==t)return!1;var i=t.offset(),a=i.top,s=i.left,n=t.outerHeight(),l=t.outerWidth(),r=t.parent().innerHeight()-n,d={top:a-r,left:s-r},c={top:0,left:0,width:l+2*r,padding:r},m={marginTop:n+r},p={top:0,left:"auto",right:"auto",width:1.05*c.width,paddingTop:r,paddingRight:0,paddingBottom:0,paddingLeft:0,display:"block"},g={paddingRight:0,paddingLeft:0,marginBottom:r},u=$("body"),f=u.innerWidth(),v={};s<u.offset().left+f/2?(p.left=c.width,g.paddingRight=r,$("#model-image-popover").removeClass("model-on-right").addClass("model-on-left").css(v)):(p.left=-p.width,g.paddingLeft=r,$("#model-image-popover").removeClass("model-on-left").addClass("model-on-right").css(v)),$("#model-image-popover").css(d),$("#model-image-popover-info").css(c),$("#model-image-popover-info #model-info").css(m),$("#model-image-popover-grid").css(p),$("#model-image-popover-grid .grid-model-image-popover-column").css(g),t.closest(".grid-masonry").find(".model").css({"z-index":0}),t.css({"z-index":29}),window.showPopoverTimeout=window.setTimeout(function(){$("#model-image-popover").hide().fadeIn(100)},250)},i=function(e){window.clearTimeout(window.showPopoverTimeout),$("#model-image-popover").fadeOut(100)},a=function(e,o){var t=o.artist_extra_1,i=o.artist_extra_2;$("#model-image-popover .model-info-model-name").html(o.artist_full_name),$("#model-image-popover .model-type").html("("+o.artist_type_name+")");var a="",s="";$("#model-image-popover .model-info-col-1").empty(),$("#model-image-popover .model-info-col-2").empty(),$.each(t,function(){var e='<div class="model-info-detail"><span class="model-detail-label">'+this.title+'</span><span class="model-detail-value" >'+this.value+"</span></div>";a+=e}),$.each(i,function(){var e='<div class="model-info-detail"><span class="model-detail-label">'+this.title+'</span><span class="model-detail-value" >'+this.value+"</span></div>";s+=e}),$("#model-image-popover .model-info-col-1").html(a),$("#model-image-popover .model-info-col-2").html(s),$.ajax({url:"/api/image/preview/"+o.artist_slug,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if($("#model-image-popover-grid .grid-model-image-popover .grid-model-image-popover-column").empty(),e.length>0){var o='<div class="grid-item"> <img src="/assets/upload/'+e[0].artist_type+"/"+e[0].artist_name+"/"+e[0].file_name+'"></div>';e.length>1&&(o+='<div class="grid-item"> <img src="/assets/upload/'+e[1].artist_type+"/"+e[1].artist_name+"/"+e[1].file_name+'"></div>'),$("#model-image-popover-grid .grid-model-image-popover .grid-model-image-popover-column.column-1").html(o),o="",e.length>2&&(o+=' <div class="grid-item"> <img src="/assets/upload/'+e[2].artist_type+"/"+e[2].artist_name+"/"+e[2].file_name+'"></div>',e.length>3&&(o+='<div class="grid-item"> <img src="/assets/upload/'+e[3].artist_type+"/"+e[3].artist_name+"/"+e[3].file_name+'"></div>')),$("#model-image-popover-grid .grid-model-image-popover .grid-model-image-popover-column.column-2").html(o)}}})},s=function(){};return{initPage:e}}(),HomePage=function(){var e=function(e){$("body").toggleClass("home"),$(".loader-container").toggleClass("active"),$(".grid-masonry").toggleClass("active"),$(".partner-slideshow-wrapper").toggleClass("hidden-data"),o(),$(window).scroll(function(){o()}),$("#title-video").html('<iframe  src="https://www.youtube.com/embed/'+e+"?autoplay=1&controls=0&modestbranding=1&loop=1&playlist="+e+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>').fitVids(),a(),i(),t()},o=function(){var e=$("#home-spacer-image"),o=.75,t=0,i=t;if(e.length>0){if(window.parallaxScrollEnabled){var a=$(window).height(),s=e.offset().top,n=$(window).scrollTop();n+a+100>s&&s-a-100<n&&(distance=n-s,i=t-distance*o+"px")}elBackgrounPos="50% "+i,e.css({backgroundPosition:elBackgrounPos})}},t=function(){$("input[name=iCheck]").iCheck({checkboxClass:"iradio_square-pink artist-check",radioClass:"iradio_flat-pink",uncheckedClass:"test",increaseArea:"20%"}),$("#filter_btn").on("click",function(e){e.preventDefault(),e.stopPropagation();var o=$.map($('input[name="iCheck"]:checked'),function(e,o){return $(e).val()});o.length<=0||(window.location.href="/danh-sach-nghe-si/"+o.join("_")+"/tat-ca")})},i=function(){$(".grid-masonry").masonry({columnWidth:".grid-column-size",itemSelector:".masonry-brick",percentPosition:!0})},a=function(){$("#partner-slideshow").slick({slidesToScroll:5,variableWidth:!0,autoPlay:!0,infinite:!0,arrows:!0,dots:!1,responsive:[{breakpoint:850,settings:{slidesToScroll:3}},{breakpoint:640,settings:{slidesToScroll:1}}]})};return{initPage:e}}(),ContactPage=function(){var e=function(){$("body").toggleClass("contact"),o()},o=function(){$(".grid-masonry").masonry({columnWidth:".grid-column-size",itemSelector:".masonry-brick",percentPosition:!0})},t=function(e,o,t,i,a,s,n,l){var r=function(){var e=!1;return function(o){return void 0!==o&&(e=o),e}}();iw=new google.maps.InfoWindow,google.maps.event.addListener(e,"click",function(){if(r())iw.close(),r(!1);else{var d="<div class='infoWindow'><h4>"+t+"</h4><p>"+i+"<p><p>"+a+"<p><a href='mailto:"+s+"' >"+s+"<a><br/><a href='"+l+"'' >"+n+"<a></div>";iw=new google.maps.InfoWindow({content:d}),iw.open(o,e),r(!0)}}),google.maps.event.addListener(iw,"closeclick",function(){r(!1)})};return{initPage:e,bindInfoWindow:t}}(),WishListPage=function(){var e=function(){$("body").toggleClass("wishlist"),$(".loader-container").toggleClass("active"),$(".grid-masonry").toggleClass("active"),o(),a()},o=function(e){$(".grid-masonry").masonry({columnWidth:".grid-column-size",itemSelector:".masonry-brick",percentPosition:!0});$(".grid-masonry").on("mouseenter",".grid-item",function(e){var o=$(this),t=o.data("artist");if(t){var a=CryptoJS.enc.Base64.parse(t),s=CryptoJS.enc.Utf8.stringify(a);i(e,JSON.parse(s))}}),$(".grid-masonry").hoverIntent({over:t,out:hidePopover,selector:".grid-item"})},t=function(e){var o=$("html");if(o.hasClass("is-touch"))return!1;window.clearTimeout(window.showPopoverTimeout);var t=$(e.currentTarget);if(void 0==t)return!1;var i=t.offset(),a=i.top,s=i.left,n=t.outerHeight(),l=t.outerWidth(),r=t.parent().innerHeight()-n,d={top:a-r,left:s-r},c={top:0,left:0,width:l+2*r,padding:r},m={marginTop:n+r},p={top:0,left:"auto",right:"auto",width:1.05*c.width,paddingTop:r,paddingRight:0,paddingBottom:0,paddingLeft:0,display:"block"},g={paddingRight:0,paddingLeft:0,marginBottom:r},u=$("body"),f=u.innerWidth(),v={};s<u.offset().left+f/2?(p.left=c.width,g.paddingRight=r,$("#model-image-popover").removeClass("model-on-right").addClass("model-on-left").css(v)):(p.left=-p.width,g.paddingLeft=r,$("#model-image-popover").removeClass("model-on-left").addClass("model-on-right").css(v)),$("#model-image-popover").css(d),$("#model-image-popover-info").css(c),$("#model-image-popover-info #model-info").css(m),$("#model-image-popover-grid").css(p),$("#model-image-popover-grid .grid-model-image-popover-column").css(g),t.closest(".grid-masonry").find(".model").css({"z-index":0}),t.css({"z-index":29}),window.showPopoverTimeout=window.setTimeout(function(){$("#model-image-popover").hide().fadeIn(100)},250)},i=function(e,o){var t=o.artist_extra_1,i=o.artist_extra_2;$("#model-image-popover .model-info-model-name").html(o.artist_full_name),$("#model-image-popover .model-type").html("("+o.artist_type_name+")");var a="",s="";$("#model-image-popover .model-info-col-1").empty(),$("#model-image-popover .model-info-col-2").empty(),$.each(t,function(){var e='<div class="model-info-detail"><span class="model-detail-label">'+this.title+'</span><span class="model-detail-value" >'+this.value+"</span></div>";a+=e}),$.each(i,function(){var e='<div class="model-info-detail"><span class="model-detail-label">'+this.title+'</span><span class="model-detail-value" >'+this.value+"</span></div>";s+=e}),$("#model-image-popover .model-info-col-1").html(a),$("#model-image-popover .model-info-col-2").html(s),$.ajax({url:"/api/image/preview/"+o.artist_slug,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){if($("#model-image-popover-grid .grid-model-image-popover .grid-model-image-popover-column").empty(),e.length>0){var o='<div class="grid-item"> <img src="/assets/upload/'+e[0].artist_type+"/"+e[0].artist_name+"/"+e[0].file_name+'"></div>';e.length>1&&(o+='<div class="grid-item"> <img src="/assets/upload/'+e[1].artist_type+"/"+e[1].artist_name+"/"+e[1].file_name+'"></div>'),$("#model-image-popover-grid .grid-model-image-popover .grid-model-image-popover-column.column-1").html(o),o="",e.length>2&&(o+=' <div class="grid-item"> <img src="/assets/upload/'+e[2].artist_type+"/"+e[2].artist_name+"/"+e[2].file_name+'"></div>',e.length>3&&(o+='<div class="grid-item"> <img src="/assets/upload/'+e[3].artist_type+"/"+e[3].artist_name+"/"+e[3].file_name+'"></div>')),$("#model-image-popover-grid .grid-model-image-popover .grid-model-image-popover-column.column-2").html(o)}}})},a=function(){};return{initPage:e}}();